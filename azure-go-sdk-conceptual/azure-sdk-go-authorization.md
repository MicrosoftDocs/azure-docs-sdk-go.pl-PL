---
title: Uwierzytelnianie przy użyciu zestawu Azure SDK dla języka Go
description: Informacje na temat metod uwierzytelniania dostępnych w zestawie Azure SDK dla języka Go i sposobu ich używania.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 04/03/2018
ms.topic: conceptual
ms.prod: azure
ms.technology: azure-sdk-go
ms.devlang: go
ms.service: active-directory
ms.component: authentication
ms.openlocfilehash: 370f5607b89c0044022f7987d06c3a55c9d6f352
ms.sourcegitcommit: f08abf902b48f8173aa6e261084ff2cfc9043305
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/03/2018
ms.locfileid: "32319887"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="c3cb6-103">Metody uwierzytelniania w zestawie Azure SDK dla języka Go</span><span class="sxs-lookup"><span data-stu-id="c3cb6-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="c3cb6-104">Zestaw Azure SDK dla języka Go oferuje różne typy i metody uwierzytelniania do użycia w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="c3cb6-105">Obsługiwane metody uwierzytelniania obejmują zarówno ściąganie informacji ze zmiennych środowiskowych, jak i interaktywne uwierzytelnianie oparte na Internecie.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="c3cb6-106">W tym artykule przedstawiono dostępne typy uwierzytelniania w zestawie SDK oraz metody ich używania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="c3cb6-107">Opisano w nim również najlepsze rozwiązania dotyczące wybierania typu uwierzytelniania odpowiedniego dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="c3cb6-108">Dostępne metody i typy uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="c3cb6-108">Available authentication types and methods</span></span>

<span data-ttu-id="c3cb6-109">Zestaw Azure SDK dla języka Go oferuje kilka różnych typów uwierzytelniania korzystających z różnych zestawów poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="c3cb6-110">Każdy z tych typów uwierzytelniania jest udostępniany za pośrednictwem innych metod uwierzytelniania, które przedstawiają sposób traktowania tych poświadczeń jako danych wejściowych w zestawie SDK.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="c3cb6-111">W poniższej tabeli opisano dostępne typy uwierzytelniania i sytuacje, w których zalecamy ich użycie w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="c3cb6-112">Typ uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="c3cb6-112">Authentication type</span></span> | <span data-ttu-id="c3cb6-113">Zalecane, gdy...</span><span class="sxs-lookup"><span data-stu-id="c3cb6-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="c3cb6-114">Uwierzytelnianie oparte na certyfikatach</span><span class="sxs-lookup"><span data-stu-id="c3cb6-114">Certificate-based authentication</span></span> | <span data-ttu-id="c3cb6-115">Masz certyfikat X509 skonfigurowany dla jednostki lub użytkownika usługi Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="c3cb6-116">Aby dowiedzieć się więcej, zobacz [Get started with certificate-based authentication in Azure Active Directory (Wprowadzenie do uwierzytelniania opartego na certyfikacie w usłudze Azure Active Directory)].</span><span class="sxs-lookup"><span data-stu-id="c3cb6-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="c3cb6-117">Poświadczenia klienta</span><span class="sxs-lookup"><span data-stu-id="c3cb6-117">Client credentials</span></span> | <span data-ttu-id="c3cb6-118">Masz skonfigurowaną jednostkę usługi dla tej aplikacji lub klasy aplikacji, do której ona należy.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="c3cb6-119">Aby dowiedzieć się więcej, zobacz [Create a service principal with Azure CLI 2.0 (Tworzenie jednostki usługi przy użyciu interfejsu wiersza polecenia platformy Azure w wersji 2.0)].</span><span class="sxs-lookup"><span data-stu-id="c3cb6-119">To learn more, see [Create a service principal with Azure CLI 2.0].</span></span> |
| <span data-ttu-id="c3cb6-120">Tożsamość usługi zarządzanej (MSI, Managed Service Identity)</span><span class="sxs-lookup"><span data-stu-id="c3cb6-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="c3cb6-121">Aplikacja działa w obrębie zasobu platformy Azure, który został skonfigurowany przy użyciu tożsamości usługi zarządzanej (MSI).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="c3cb6-122">Aby dowiedzieć się więcej, zobacz [Managed Service Identity (MSI) for Azure resources (Tożsamość usługi zarządzanej (MSI) dla zasobów platformy Azure)].</span><span class="sxs-lookup"><span data-stu-id="c3cb6-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="c3cb6-123">Token urządzenia</span><span class="sxs-lookup"><span data-stu-id="c3cb6-123">Device token</span></span> | <span data-ttu-id="c3cb6-124">Aplikacja jest przeznaczona __tylko__ do użycia w trybie interaktywnym i ma różnych użytkowników potencjalnie z wielu dzierżaw usługi AAD.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="c3cb6-125">Użytkownicy mogą logować się za pomocą przeglądarki internetowej.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-125">Users have access to a web browser to log in.</span></span> <span data-ttu-id="c3cb6-126">Aby uzyskać więcej informacji, zobacz [Używanie tokenu urządzenia](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="c3cb6-127">Nazwa użytkownika/hasło</span><span class="sxs-lookup"><span data-stu-id="c3cb6-127">Username/password</span></span> | <span data-ttu-id="c3cb6-128">Masz interaktywną aplikację, która nie może używać innej metody uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="c3cb6-129">Użytkownicy nie mają włączonego uwierzytelniania wieloskładnikowego na potrzeby logowania do usługi AAD.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-129">Your users do not have multi-factor authentication enabled for their AAD login.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="c3cb6-130">Jeśli używasz typu uwierzytelniania innego niż poświadczenia klienta, aplikacja musi zostać zarejestrowana w usłudze Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="c3cb6-131">Aby dowiedzieć się, jak to zrobić, zobacz [Integrating applications with Azure Active Directory (Integrowanie aplikacji za pomocą usługi Azure Active Directory)](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>

> [!NOTE]
> <span data-ttu-id="c3cb6-132">Jeśli nie masz specjalnych wymagań, unikaj uwierzytelniania nazwy użytkownika/hasła.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="c3cb6-133">W sytuacjach, w których logowanie oparte na użytkowniku jest właściwym rozwiązaniem, przeważnie można w zamian użyć uwierzytelniania tokenu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-133">In situations where user-based login is appropriate, device token authentication can usually be used instead.</span></span>

[Get started with certificate-based authentication in Azure Active Directory (Wprowadzenie do uwierzytelniania opartego na certyfikacie w usłudze Azure Active Directory)]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Create a service principal with Azure CLI 2.0 (Tworzenie jednostki usługi przy użyciu interfejsu wiersza polecenia platformy Azure w wersji 2.0)]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Managed Service Identity (MSI) for Azure resources (Tożsamość usługi zarządzanej (MSI) dla zasobów platformy Azure)]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="c3cb6-137">Te typy uwierzytelniania są dostępne za pośrednictwem różnych metod.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="c3cb6-138">[_Uwierzytelnianie oparte na środowisku_](#use-environment-based-authentication) polega na odczytywaniu poświadczeń bezpośrednio ze środowiska programu.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="c3cb6-139">[_Uwierzytelnianie na podstawie pliku_](#use-file-based-authentication) polega na załadowaniu pliku zawierającego poświadczenia jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="c3cb6-140">[_Uwierzytelnianie oparte na kliencie_](#use-an-authentication-client) polega na użyciu obiektu w kodzie języka Go i wyznaczenie użytkownika jako osoby odpowiedzialnej za podawanie poświadczeń podczas wykonywania programu.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="c3cb6-141">Ponadto [_uwierzytelnianie tokenu urządzenia_](#use-device-token-authentication) wymaga od użytkowników interaktywnego logowania za pośrednictwem przeglądarki internetowej przy użyciu tokenu i nie może być używane z uwierzytelnianiem w oparciu o środowisko lub plik.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to log in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="c3cb6-142">Wszystkie typy i funkcje uwierzytelniania są dostępne w pakiecie `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="c3cb6-143">Jeśli nie masz specjalnych wymagań, unikaj uwierzytelniania opartego na kliencie.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="c3cb6-144">Ta metoda uwierzytelniania upraszcza stosowanie niewłaściwych rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="c3cb6-145">W szczególności użycie uwierzytelniania opartego na kliencie zachęca do umieszczania poświadczeń w kodzie.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="c3cb6-146">Pisanie kodu niestandardowego na potrzeby uwierzytelniania może zostać również wyeliminowane w przyszłych wydaniach zestawu SDK, jeśli zmienią się wymagania dotyczące uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="c3cb6-147">Używanie uwierzytelniania opartego na środowisku</span><span class="sxs-lookup"><span data-stu-id="c3cb6-147">Use environment-based authentication</span></span>

<span data-ttu-id="c3cb6-148">Jeśli korzystasz z aplikacji w środowisku ściśle kontrolowanym, takim jak kontener, uwierzytelnianie oparte na środowisku jest naturalnym wyborem.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="c3cb6-149">Możesz skonfigurować środowisko powłoki przed uruchomieniem aplikacji. Zestaw SDK dla języka Go odczyta te zmienne środowiskowe w czasie wykonywania w celu uwierzytelnienia przy użyciu platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span> 

<span data-ttu-id="c3cb6-150">Uwierzytelnianie oparte na środowisku oferuje obsługę wszystkich metod uwierzytelniania, z wyjątkiem tokenów urządzeń, a obliczenia będą wykonywane w następującej kolejności: poświadczenia klienta, certyfikaty, nazwa użytkownika/hasło i tożsamość usługi zarządzanej (MSI).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="c3cb6-151">Jeśli nie ustawiono wymaganej zmiennej środowiskowej lub zestaw SDK otrzyma odmowę z usługi uwierzytelniania, zostanie podjęta próba użycia kolejnego typu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="c3cb6-152">Jeśli zestaw SDK nie może uwierzytelnić ze środowiska, zwraca błąd.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="c3cb6-153">W poniższej tabeli przedstawiono zmienne środowiskowe, które należy ustawić dla każdego typu uwierzytelniania obsługiwanego podczas uwierzytelniania opartego na środowisku.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="c3cb6-154">Typ uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="c3cb6-154">Authentication type</span></span> | <span data-ttu-id="c3cb6-155">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="c3cb6-155">Environment variable</span></span> | <span data-ttu-id="c3cb6-156">Opis</span><span class="sxs-lookup"><span data-stu-id="c3cb6-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="c3cb6-157">__Poświadczenia klienta__</span><span class="sxs-lookup"><span data-stu-id="c3cb6-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="c3cb6-158">Identyfikator dzierżawy usługi Active Directory, do której należy jednostka usługi.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="c3cb6-159">Nazwa lub identyfikator jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="c3cb6-160">Wpis tajny skojarzony z jednostką usługi.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="c3cb6-161">__Certyfikat__</span><span class="sxs-lookup"><span data-stu-id="c3cb6-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="c3cb6-162">Identyfikator dzierżawy usługi Active Directory, przy użyciu której zarejestrowano certyfikat.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="c3cb6-163">Identyfikator klienta aplikacji skojarzony z certyfikatem.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="c3cb6-164">Ścieżka do pliku certyfikatu klienta.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="c3cb6-165">Hasło certyfikatu klienta.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="c3cb6-166">__Nazwa użytkownika/hasło__</span><span class="sxs-lookup"><span data-stu-id="c3cb6-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="c3cb6-167">Identyfikator dzierżawy usługi Active Directory, do której należy użytkownik.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="c3cb6-168">Identyfikator klienta aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="c3cb6-169">Nazwa użytkownika służąca do logowania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-169">The username to log in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="c3cb6-170">Hasło służące do logowania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-170">The password to log in with.</span></span> |
| <span data-ttu-id="c3cb6-171">__MSI__</span><span class="sxs-lookup"><span data-stu-id="c3cb6-171">__MSI__</span></span> | | <span data-ttu-id="c3cb6-172">Usługa MSI nie wymaga ustawienia żadnych poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="c3cb6-173">Aplikacja musi działać w obrębie zasobu platformy Azure skonfigurowanego do użycia usługi MSI.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="c3cb6-174">Aby uzyskać szczegółowe informacje, zobacz [Managed Service Identity (MSI) for Azure resources (Tożsamość usługi zarządzanej (MSI) dla zasobów platformy Azure)].</span><span class="sxs-lookup"><span data-stu-id="c3cb6-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="c3cb6-175">Jeśli musisz nawiązać połączenie z punktem końcowym chmury lub zarządzania innym niż domyślna chmura platformy Azure, możesz również ustawić poniższe zmienne środowiskowe.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="c3cb6-176">Najbardziej typowe przyczyny ich ustawiania to korzystanie z usługi Azure Stack, chmury w innym regionie geograficznym lub klasycznego modelu wdrożenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="c3cb6-177">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="c3cb6-177">Environment variable</span></span> | <span data-ttu-id="c3cb6-178">Opis</span><span class="sxs-lookup"><span data-stu-id="c3cb6-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="c3cb6-179">Nazwa środowiska chmury, z którym będzie nawiązywane połączenie.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="c3cb6-180">Identyfikator zasobu usługi Active Directory do użycia podczas łączenia.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="c3cb6-181">Powinien być to identyfikator URI wskazujący na punkt końcowy zarządzania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="c3cb6-182">W przypadku korzystania z uwierzytelniania opartego na środowisku należy wywołać funkcję [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment), aby pobrać obiekt autoryzatora.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="c3cb6-183">Ten obiekt jest następnie ustawiany na właściwość `Authorizer` klientów, aby umożliwić im dostęp do platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="c3cb6-184">Uwierzytelnianie w usłudze Azure Stack</span><span class="sxs-lookup"><span data-stu-id="c3cb6-184">Authentication on Azure Stack</span></span>

<span data-ttu-id="c3cb6-185">Na potrzeby uwierzytelniania w usłudze Azure Stack należy ustawić następujące zmienne:</span><span class="sxs-lookup"><span data-stu-id="c3cb6-185">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="c3cb6-186">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="c3cb6-186">Environment variable</span></span> | <span data-ttu-id="c3cb6-187">Opis</span><span class="sxs-lookup"><span data-stu-id="c3cb6-187">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="c3cb6-188">Punkt końcowy usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-188">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="c3cb6-189">Identyfikator zasobu usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-189">The Active Directory resource ID.</span></span> |

<span data-ttu-id="c3cb6-190">Te zmienne można pobrać z informacji o metadanych usługi Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-190">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="c3cb6-191">Aby pobrać metadane, otwórz przeglądarkę internetową w środowisku Azure Stack i skorzystaj z adresu URL: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span><span class="sxs-lookup"><span data-stu-id="c3cb6-191">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="c3cb6-192">Adres `ResourceManagerURL` różni się w zależności od nazwy regionu, nazwy maszyny i zewnętrznej pełnej nazwy domeny (FQDN, fully qualified domain name) wdrożenia usługi Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="c3cb6-192">The `ResourceManagerURL` varies based on the region name, machine name and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="c3cb6-193">Środowisko</span><span class="sxs-lookup"><span data-stu-id="c3cb6-193">Environment</span></span> | <span data-ttu-id="c3cb6-194">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="c3cb6-194">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="c3cb6-195">Zestaw deweloperski</span><span class="sxs-lookup"><span data-stu-id="c3cb6-195">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="c3cb6-196">Zintegrowane systemy</span><span class="sxs-lookup"><span data-stu-id="c3cb6-196">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="c3cb6-197">Aby uzyskać więcej informacji na temat korzystania z zestawu Azure SDK dla języka Go w usłudze Azure Stack, zobacz [Korzystanie z profili wersji interfejsu API za pomocą języka Go w usłudze Azure Stack](https://docs.microsoft.com/en-us/azure/azure-stack/user/azure-stack-version-profiles-go)</span><span class="sxs-lookup"><span data-stu-id="c3cb6-197">For more details on how to use Azure SDK for Go on Azure Stack see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/en-us/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>


## <a name="use-file-based-authentication"></a><span data-ttu-id="c3cb6-198">Używanie uwierzytelniania opartego na pliku</span><span class="sxs-lookup"><span data-stu-id="c3cb6-198">Use file-based authentication</span></span>

<span data-ttu-id="c3cb6-199">Uwierzytelnianie oparte na pliku działa tylko z poświadczeniami klienta przechowywanymi w formacie pliku lokalnego generowanym przez [interfejs wiersza polecenia platformy Azure w wersji 2.0](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-199">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI 2.0](/cli/azure).</span></span> <span data-ttu-id="c3cb6-200">Można łatwo utworzyć ten plik, tworząc nową jednostkę usługi przy użyciu parametru `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-200">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="c3cb6-201">Jeśli planujesz użycie uwierzytelniania opartego na pliku, upewnij się, że ten argument zostanie podany podczas tworzenia jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-201">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="c3cb6-202">Ponieważ interfejs wiersza polecenia wyświetla dane wyjściowe w lokalizacji `stdout`, przekieruj dane wyjściowe do pliku.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-202">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="c3cb6-203">Ustaw zmienną środowiskową `AZURE_AUTH_LOCATION` na lokalizację, w której znajduje się plik autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-203">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="c3cb6-204">Ta zmienna środowiskowa jest odczytywana przez aplikację, a poświadczenia w jej obrębie są analizowane.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-204">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="c3cb6-205">Jeśli musisz wybrać plik autoryzacji w czasie wykonywania, zmodyfikuj środowisko programu przy użyciu funkcji [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-205">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="c3cb6-206">Aby załadować informacje o uwierzytelnianiu, wywołaj funkcję [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-206">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="c3cb6-207">W przeciwieństwie do autoryzacji opartej na środowisku autoryzacja na podstawie pliku wymaga punktu końcowego zasobu.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-207">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="c3cb6-208">Aby uzyskać więcej informacji na temat używania jednostek usług i zarządzania ich uprawnieniami dostępu, zobacz [Create a service principal with Azure CLI 2.0 (Tworzenie jednostki usługi przy użyciu interfejsu wiersza polecenia platformy Azure w wersji 2.0)].</span><span class="sxs-lookup"><span data-stu-id="c3cb6-208">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI 2.0].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="c3cb6-209">Używanie uwierzytelniania tokenu urządzenia</span><span class="sxs-lookup"><span data-stu-id="c3cb6-209">Use device token authentication</span></span>

<span data-ttu-id="c3cb6-210">Jeśli chcesz, aby użytkownicy logowali się interaktywnie, najlepszym sposobem zaoferowania tej możliwości jest uwierzytelnianie tokenu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-210">If you want users to log in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="c3cb6-211">Ten przebieg uwierzytelniania przekazuje użytkownikowi token do wklejenia w witrynie logowania firmy Microsoft. Następnie użytkownik może się w niej zalogować za pomocą konta usługi Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-211">This authentication flow passes the user a token to paste into a Microsoft login site, where they then log in with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="c3cb6-212">Ta metoda uwierzytelniania obsługuje konta z włączonym uwierzytelnianiem wieloskładnikowym,w przeciwieństwie do standardowego uwierzytelniania za pomocą nazwy użytkownika/hasła.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-212">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="c3cb6-213">Aby użyć uwierzytelniania tokenu urządzenia, należy utworzyć autoryzator [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) przy użyciu funkcji [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-213">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="c3cb6-214">Wywołaj element [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) w obiekcie wynikowym, aby rozpocząć proces uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-214">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="c3cb6-215">Uwierzytelnianie przepływu urządzenia blokuje wykonywanie programu do momentu ukończenia całego przepływu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-215">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="c3cb6-216">Używanie klienta uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="c3cb6-216">Use an authentication client</span></span>

<span data-ttu-id="c3cb6-217">Jeśli potrzebujesz określonego typu uwierzytelniania i chcesz, aby program wykonał zadania związane z ładowaniem informacji o uwierzytelnianiu od użytkownika, możesz użyć dowolnego klienta zgodnego z interfejsem [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="c3cb6-217">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="c3cb6-218">Użyj typu, który implementuje ten interfejs, jeśli potrzebujesz programu interaktywnego, używasz specjalnych plików konfiguracji lub masz wymaganie, które uniemożliwia korzystanie z innej metody uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-218">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="c3cb6-219">Nigdy nie umieszczaj poświadczeń platformy Azure w kodzie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-219">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="c3cb6-220">Wprowadzanie wpisów tajnych do pliku binarnego aplikacji ułatwia osobie atakującej ich wyodrębnienie, bez względu na to, czy aplikacja została uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-220">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="c3cb6-221">Powoduje to narażenie na ryzyko wszystkich zasobów platformy Azure z autoryzowanymi poświadczeniami!</span><span class="sxs-lookup"><span data-stu-id="c3cb6-221">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="c3cb6-222">W poniższej tabeli przedstawiono listę typów w zestawie SDK, które są zgodne z interfejsem `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-222">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="c3cb6-223">Typ uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="c3cb6-223">Authentication type</span></span> | <span data-ttu-id="c3cb6-224">Typ autoryzatora</span><span class="sxs-lookup"><span data-stu-id="c3cb6-224">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="c3cb6-225">Uwierzytelnianie oparte na certyfikacie</span><span class="sxs-lookup"><span data-stu-id="c3cb6-225">Certificate-based authentication</span></span> | <span data-ttu-id="c3cb6-226">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="c3cb6-226">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="c3cb6-227">Poświadczenia klienta</span><span class="sxs-lookup"><span data-stu-id="c3cb6-227">Client credentials</span></span> | <span data-ttu-id="c3cb6-228">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="c3cb6-228">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="c3cb6-229">Tożsamość usługi zarządzanej (MSI, Managed Service Identity)</span><span class="sxs-lookup"><span data-stu-id="c3cb6-229">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="c3cb6-230">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="c3cb6-230">[MSIConfig]</span></span> |
| <span data-ttu-id="c3cb6-231">Nazwa użytkownika/hasło</span><span class="sxs-lookup"><span data-stu-id="c3cb6-231">Username/password</span></span> | <span data-ttu-id="c3cb6-232">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="c3cb6-232">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="c3cb6-237">Utwórz wystawcę uwierzytelniania przy użyciu skojarzonej funkcji `New`, a następnie wywołaj instrukcję `Authorize` w obiekcie wynikowym w celu przeprowadzenia uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="c3cb6-237">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="c3cb6-238">Aby na przykład używać uwierzytelniania opartego na certyfikacie:</span><span class="sxs-lookup"><span data-stu-id="c3cb6-238">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
