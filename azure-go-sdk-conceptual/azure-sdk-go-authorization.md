---
title: Uwierzytelnianie przy użyciu zestawu Azure SDK dla języka Go
description: Informacje na temat metod uwierzytelniania dostępnych w zestawie Azure SDK dla języka Go i sposobu ich używania.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 09/05/2018
ms.topic: conceptual
ms.technology: azure-sdk-go
ms.devlang: go
ms.service: active-directory
ms.component: authentication
ms.openlocfilehash: 28fd4a4c0832ab19dcf52dc549d0ddc0d1eec6f1
ms.sourcegitcommit: 8b9e10b960150dc08f046ab840d6a5627410db29
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/07/2018
ms.locfileid: "44059105"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="a2a6c-103">Metody uwierzytelniania w zestawie Azure SDK dla języka Go</span><span class="sxs-lookup"><span data-stu-id="a2a6c-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="a2a6c-104">Zestaw Azure SDK dla języka Go oferuje różne sposoby uwierzytelniania na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-104">The Azure SDK for Go offers multiple ways to authenticate with Azure.</span></span> <span data-ttu-id="a2a6c-105">Te _typy_ uwierzytelniania są wywoływane przez różne _metody_ uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-105">These authentication _types_ are invoked through different authentication _methods_.</span></span> <span data-ttu-id="a2a6c-106">Ten artykuł zawiera opis dostępnych typów i metod oraz informacje pozwalające na wybranie najbardziej odpowiedniego rozwiązania dla Twojej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-106">This article covers the available types, methods, and how to choose which are best for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="a2a6c-107">Dostępne metody i typy uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="a2a6c-107">Available authentication types and methods</span></span>

<span data-ttu-id="a2a6c-108">Zestaw Azure SDK dla języka Go oferuje kilka różnych typów uwierzytelniania korzystających z różnych zestawów poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-108">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="a2a6c-109">Każdy z tych typów uwierzytelniania jest udostępniany za pośrednictwem innych metod uwierzytelniania, które przedstawiają sposób traktowania tych poświadczeń jako danych wejściowych w zestawie SDK.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-109">Each authentication type is available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="a2a6c-110">W poniższej tabeli opisano dostępne typy uwierzytelniania i sytuacje, w których zalecamy ich użycie w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-110">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="a2a6c-111">Typ uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="a2a6c-111">Authentication type</span></span> | <span data-ttu-id="a2a6c-112">Zalecane, gdy...</span><span class="sxs-lookup"><span data-stu-id="a2a6c-112">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="a2a6c-113">Uwierzytelnianie oparte na certyfikatach</span><span class="sxs-lookup"><span data-stu-id="a2a6c-113">Certificate-based authentication</span></span> | <span data-ttu-id="a2a6c-114">Masz certyfikat X509 skonfigurowany dla jednostki lub użytkownika usługi Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-114">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="a2a6c-115">Aby dowiedzieć się więcej, zobacz [Wprowadzenie do uwierzytelniania opartego na certyfikacie w usłudze Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="a2a6c-115">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="a2a6c-116">Poświadczenia klienta</span><span class="sxs-lookup"><span data-stu-id="a2a6c-116">Client credentials</span></span> | <span data-ttu-id="a2a6c-117">Masz skonfigurowaną jednostkę usługi dla tej aplikacji lub klasy aplikacji, do której ona należy.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-117">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="a2a6c-118">Aby dowiedzieć się więcej, zobacz [Tworzenie jednostki usługi przy użyciu interfejsu wiersza polecenia platformy Azure].</span><span class="sxs-lookup"><span data-stu-id="a2a6c-118">To learn more, see [Create a service principal with Azure CLI].</span></span> |
| <span data-ttu-id="a2a6c-119">Tożsamość usługi zarządzanej (MSI, Managed Service Identity)</span><span class="sxs-lookup"><span data-stu-id="a2a6c-119">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="a2a6c-120">Aplikacja działa w obrębie zasobu platformy Azure, który został skonfigurowany przy użyciu tożsamości usługi zarządzanej (MSI).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-120">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="a2a6c-121">Aby dowiedzieć się więcej, zobacz [Tożsamość usługi zarządzanej (MSI) dla zasobów platformy Azure].</span><span class="sxs-lookup"><span data-stu-id="a2a6c-121">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="a2a6c-122">Token urządzenia</span><span class="sxs-lookup"><span data-stu-id="a2a6c-122">Device token</span></span> | <span data-ttu-id="a2a6c-123">Twoja aplikacja jest przeznaczona do korzystania z niej __tylko__ w sposób interaktywny.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-123">Your application is meant to be used interactively __only__.</span></span> <span data-ttu-id="a2a6c-124">Użytkownicy mogą mieć włączone uwierzytelnianie wieloskładnikowe.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-124">Users may have multi-factor authentication enabled.</span></span> <span data-ttu-id="a2a6c-125">Użytkownicy mogą logować się za pomocą przeglądarki internetowej.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-125">Users have access to a web browser to sign in.</span></span> <span data-ttu-id="a2a6c-126">Aby uzyskać więcej informacji, zobacz [Używanie tokenu urządzenia](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="a2a6c-127">Nazwa użytkownika/hasło</span><span class="sxs-lookup"><span data-stu-id="a2a6c-127">Username/password</span></span> | <span data-ttu-id="a2a6c-128">Posiadasz interaktywną aplikację, dla której nie może być używana inna metoda uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-128">You have an interactive application that can't use any other authentication method.</span></span> <span data-ttu-id="a2a6c-129">Użytkownicy nie mają włączonego uwierzytelniania wieloskładnikowego na potrzeby logowania do usługi AAD.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-129">Your users don't have multi-factor authentication enabled for their AAD sign-in.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="a2a6c-130">Jeśli używasz typu uwierzytelniania innego niż poświadczenia klienta, aplikacja musi zostać zarejestrowana w usłudze Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="a2a6c-131">Aby dowiedzieć się, jak to zrobić, zobacz [Integrating applications with Azure Active Directory (Integrowanie aplikacji za pomocą usługi Azure Active Directory)](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>
>
> [!NOTE]
> <span data-ttu-id="a2a6c-132">Jeśli nie masz specjalnych wymagań, unikaj uwierzytelniania nazwy użytkownika/hasła.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="a2a6c-133">W sytuacjach, w których logowanie oparte na użytkowniku jest właściwym rozwiązaniem, przeważnie można w zamian użyć uwierzytelniania tokenu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-133">In situations where user-based sign in is appropriate, device token authentication can usually be used instead.</span></span>

[Wprowadzenie do uwierzytelniania opartego na certyfikacie w usłudze Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Tworzenie jednostki usługi przy użyciu interfejsu wiersza polecenia platformy Azure]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Tożsamość usługi zarządzanej (MSI) dla zasobów platformy Azure]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="a2a6c-137">Te typy uwierzytelniania są dostępne za pośrednictwem różnych metod.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-137">These authentication types are available through different methods.</span></span>

* <span data-ttu-id="a2a6c-138">[_Uwierzytelnianie oparte na środowisku_](#use-environment-based-authentication) polega na odczytywaniu poświadczeń bezpośrednio ze środowiska programu.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span>
* <span data-ttu-id="a2a6c-139">[_Uwierzytelnianie na podstawie pliku_](#use-file-based-authentication) polega na załadowaniu pliku zawierającego poświadczenia jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span>
* <span data-ttu-id="a2a6c-140">[_Uwierzytelnianie oparte na kliencie_](#use-an-authentication-client) polega na użyciu obiektu w kodzie i wyznaczeniu użytkownika jako osoby odpowiedzialnej za podawanie poświadczeń podczas wykonywania programu.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in code and makes you responsible for providing the credentials during program execution.</span></span>
* <span data-ttu-id="a2a6c-141">[_Uwierzytelnianie tokenu urządzenia_](#use-device-token-authentication) wymaga od użytkowników interaktywnego logowania się przez przeglądarkę internetową przy użyciu tokenu.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-141">[_Device token authentication_](#use-device-token-authentication) requires users to sign in interactively through a web browser with a token.</span></span>

<span data-ttu-id="a2a6c-142">Wszystkie typy i funkcje uwierzytelniania są dostępne w pakiecie `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="a2a6c-143">Jeśli nie masz specjalnych wymagań, unikaj uwierzytelniania opartego na kliencie.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="a2a6c-144">Ta metoda uwierzytelniania upraszcza stosowanie niewłaściwych rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="a2a6c-145">W szczególności użycie uwierzytelniania opartego na kliencie zachęca do umieszczania poświadczeń w kodzie.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="a2a6c-146">Pisanie kodu niestandardowego na potrzeby uwierzytelniania może zostać również wyeliminowane w przyszłych wydaniach zestawu SDK, jeśli zmienią się wymagania dotyczące uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="a2a6c-147">Używanie uwierzytelniania opartego na środowisku</span><span class="sxs-lookup"><span data-stu-id="a2a6c-147">Use environment-based authentication</span></span>

<span data-ttu-id="a2a6c-148">Jeśli korzystasz z aplikacji w kontrolowanych ustawieniach, uwierzytelnianie oparte na środowisku jest naturalnym wyborem.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-148">If you're running your application in a controlled setting, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="a2a6c-149">W przypadku tej metody uwierzytelniania konfigurujesz środowisko powłoki przed uruchomieniem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-149">With this authentication method, you configure the shell environment before running your application.</span></span> <span data-ttu-id="a2a6c-150">W czasie wykonywania zestaw SDK dla języka Go odczytuje te zmienne środowiskowe do uwierzytelniania za pomocą platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-150">At runtime, the Go SDK reads these environment variables to authenticate with Azure.</span></span>

<span data-ttu-id="a2a6c-151">Uwierzytelnianie oparte na środowisku oferuje obsługę wszystkich metod uwierzytelniania, z wyjątkiem tokenów urządzeń, które są uwzględniane w następującej kolejności:</span><span class="sxs-lookup"><span data-stu-id="a2a6c-151">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order:</span></span>

* <span data-ttu-id="a2a6c-152">Poświadczenia klienta</span><span class="sxs-lookup"><span data-stu-id="a2a6c-152">Client credentials</span></span>
* <span data-ttu-id="a2a6c-153">Certyfikaty X509</span><span class="sxs-lookup"><span data-stu-id="a2a6c-153">X509 certificates</span></span>
* <span data-ttu-id="a2a6c-154">Nazwa użytkownika/hasło</span><span class="sxs-lookup"><span data-stu-id="a2a6c-154">Username/password</span></span>
* <span data-ttu-id="a2a6c-155">Tożsamość usługi zarządzanej (MSI, Managed Service Identity)</span><span class="sxs-lookup"><span data-stu-id="a2a6c-155">Managed Service Identity (MSI)</span></span>

<span data-ttu-id="a2a6c-156">Jeśli typ uwierzytelniania ma nieustawione wartości lub następuje odmowa, zestaw SDK automatycznie próbuje użyć kolejnego typu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-156">If an authentication type has unset values or is refused, the SDK automatically tries the next authentication type.</span></span> <span data-ttu-id="a2a6c-157">Gdy nie ma już typów do wypróbowania, zestaw SDK zwraca błąd.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-157">When no more types are available to try, the SDK returns an error.</span></span>

<span data-ttu-id="a2a6c-158">W poniższej tabeli przedstawiono zmienne środowiskowe, które należy ustawić dla każdego typu uwierzytelniania obsługiwanego podczas uwierzytelniania opartego na środowisku.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-158">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="a2a6c-159">Typ uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="a2a6c-159">Authentication type</span></span> | <span data-ttu-id="a2a6c-160">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a2a6c-160">Environment variable</span></span> | <span data-ttu-id="a2a6c-161">Opis</span><span class="sxs-lookup"><span data-stu-id="a2a6c-161">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="a2a6c-162">__Poświadczenia klienta__</span><span class="sxs-lookup"><span data-stu-id="a2a6c-162">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="a2a6c-163">Identyfikator dzierżawy usługi Active Directory, do której należy jednostka usługi.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-163">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="a2a6c-164">Nazwa lub identyfikator jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-164">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="a2a6c-165">Wpis tajny skojarzony z jednostką usługi.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-165">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="a2a6c-166">__Certyfikat__</span><span class="sxs-lookup"><span data-stu-id="a2a6c-166">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="a2a6c-167">Identyfikator dzierżawy usługi Active Directory, przy użyciu której zarejestrowano certyfikat.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-167">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="a2a6c-168">Identyfikator klienta aplikacji skojarzony z certyfikatem.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-168">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="a2a6c-169">Ścieżka do pliku certyfikatu klienta.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-169">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="a2a6c-170">Hasło certyfikatu klienta.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-170">The password for the client certificate.</span></span> |
| <span data-ttu-id="a2a6c-171">__Nazwa użytkownika/hasło__</span><span class="sxs-lookup"><span data-stu-id="a2a6c-171">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="a2a6c-172">Identyfikator dzierżawy usługi Active Directory, do której należy użytkownik.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-172">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="a2a6c-173">Identyfikator klienta aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-173">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="a2a6c-174">Nazwa użytkownika na potrzeby logowania się.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-174">The username to sign in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="a2a6c-175">Hasło na potrzeby logowania się.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-175">The password to sign in with.</span></span> |
| <span data-ttu-id="a2a6c-176">__MSI__</span><span class="sxs-lookup"><span data-stu-id="a2a6c-176">__MSI__</span></span> | | <span data-ttu-id="a2a6c-177">W przypadku uwierzytelniania MSI nie są wymagane żadne poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-177">No credentials are needed for MSI authentication.</span></span> <span data-ttu-id="a2a6c-178">Aplikacja musi działać w obrębie zasobu platformy Azure skonfigurowanego do użycia usługi MSI.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-178">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="a2a6c-179">Aby uzyskać szczegółowe informacje, zobacz [Tożsamość usługi zarządzanej (MSI) dla zasobów platformy Azure].</span><span class="sxs-lookup"><span data-stu-id="a2a6c-179">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="a2a6c-180">Aby nawiązać połączenie z punktem końcowym chmury lub zarządzania innym niż domyślna publiczna chmura platformy Azure, ustaw poniższe zmienne środowiskowe.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-180">To connect to a cloud or management endpoint other than the default Azure public cloud, set the following environment variables.</span></span> <span data-ttu-id="a2a6c-181">Najbardziej typowe przyczyny ich ustawiania to korzystanie z usługi Azure Stack, z chmury w innym regionie geograficznym lub z klasycznego modelu wdrożenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-181">The most common reasons are if you use Azure Stack, a cloud in a different geographic region, or the classic deployment model.</span></span>

| <span data-ttu-id="a2a6c-182">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a2a6c-182">Environment variable</span></span> | <span data-ttu-id="a2a6c-183">Opis</span><span class="sxs-lookup"><span data-stu-id="a2a6c-183">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="a2a6c-184">Nazwa środowiska chmury, z którym będzie nawiązywane połączenie.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-184">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="a2a6c-185">Identyfikator zasobu usługi Active Directory używany podczas nawiązywania połączenia jako identyfikator URI punktu końcowego zarządzania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-185">The Active Directory resource ID to use when connecting, as a URI to your management endpoint.</span></span> |

<span data-ttu-id="a2a6c-186">W przypadku korzystania z uwierzytelniania opartego na środowisku należy wywołać funkcję [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment), aby pobrać obiekt autoryzatora.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-186">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="a2a6c-187">Ten obiekt jest następnie ustawiany na właściwość `Authorizer` klientów, aby umożliwić im dostęp do platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-187">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="a2a6c-188">Uwierzytelnianie w usłudze Azure Stack</span><span class="sxs-lookup"><span data-stu-id="a2a6c-188">Authentication on Azure Stack</span></span>

<span data-ttu-id="a2a6c-189">Na potrzeby uwierzytelniania w usłudze Azure Stack należy ustawić następujące zmienne:</span><span class="sxs-lookup"><span data-stu-id="a2a6c-189">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="a2a6c-190">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a2a6c-190">Environment variable</span></span> | <span data-ttu-id="a2a6c-191">Opis</span><span class="sxs-lookup"><span data-stu-id="a2a6c-191">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="a2a6c-192">Punkt końcowy usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-192">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="a2a6c-193">Identyfikator zasobu usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-193">The Active Directory resource ID.</span></span> |

<span data-ttu-id="a2a6c-194">Te zmienne można pobrać z informacji o metadanych usługi Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-194">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="a2a6c-195">Aby pobrać metadane, otwórz przeglądarkę internetową w środowisku Azure Stack i skorzystaj z adresu URL: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span><span class="sxs-lookup"><span data-stu-id="a2a6c-195">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="a2a6c-196">Adres `ResourceManagerURL` różni się w zależności od nazwy regionu, nazwy komputera i zewnętrznej, w pełni kwalifikowanej nazwy domeny (FQDN) wdrożenia usługi Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="a2a6c-196">The `ResourceManagerURL` varies based on the region name, machine name, and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="a2a6c-197">Środowisko</span><span class="sxs-lookup"><span data-stu-id="a2a6c-197">Environment</span></span> | <span data-ttu-id="a2a6c-198">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="a2a6c-198">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="a2a6c-199">Zestaw deweloperski</span><span class="sxs-lookup"><span data-stu-id="a2a6c-199">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="a2a6c-200">Zintegrowane systemy</span><span class="sxs-lookup"><span data-stu-id="a2a6c-200">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="a2a6c-201">Aby uzyskać więcej informacji na temat korzystania z zestawu Azure SDK dla języka Go w usłudze Azure Stack, zobacz [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go) (Korzystanie z profilów wersji interfejsu API za pomocą języka Go w usłudze Azure Stack).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-201">For more information on how to use the Azure SDK for Go on Azure Stack, see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>

## <a name="use-file-based-authentication"></a><span data-ttu-id="a2a6c-202">Używanie uwierzytelniania opartego na pliku</span><span class="sxs-lookup"><span data-stu-id="a2a6c-202">Use file-based authentication</span></span>

<span data-ttu-id="a2a6c-203">Uwierzytelnianie oparte na pliku korzysta z formatu pliku wygenerowanego przez [interfejs wiersza polecenia platformy Azure](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-203">File-based authentication uses a file format generated by [the Azure CLI](/cli/azure).</span></span> <span data-ttu-id="a2a6c-204">Można łatwo utworzyć ten plik, tworząc nową jednostkę usługi przy użyciu parametru `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-204">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="a2a6c-205">Jeśli planujesz użycie uwierzytelniania opartego na pliku, upewnij się, że ten argument zostanie podany podczas tworzenia jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-205">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="a2a6c-206">Ponieważ interfejs wiersza polecenia wyświetla dane wyjściowe w lokalizacji `stdout`, przekieruj dane wyjściowe do pliku.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-206">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="a2a6c-207">Ustaw zmienną środowiskową `AZURE_AUTH_LOCATION` na lokalizację, w której znajduje się plik autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-207">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="a2a6c-208">Ta zmienna środowiskowa jest odczytywana przez aplikację, a poświadczenia w jej obrębie są analizowane.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-208">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="a2a6c-209">Jeśli musisz wybrać plik autoryzacji w czasie wykonywania, zmodyfikuj środowisko programu przy użyciu funkcji [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-209">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="a2a6c-210">Aby załadować informacje o uwierzytelnianiu, wywołaj funkcję [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-210">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="a2a6c-211">W przeciwieństwie do autoryzacji opartej na środowisku autoryzacja na podstawie pliku wymaga punktu końcowego zasobu.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-211">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="a2a6c-212">Aby uzyskać więcej informacji na temat używania jednostek usług i zarządzania ich uprawnieniami dostępu, zobacz [Tworzenie jednostki usługi przy użyciu interfejsu wiersza polecenia platformy Azure].</span><span class="sxs-lookup"><span data-stu-id="a2a6c-212">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="a2a6c-213">Używanie uwierzytelniania tokenu urządzenia</span><span class="sxs-lookup"><span data-stu-id="a2a6c-213">Use device token authentication</span></span>

<span data-ttu-id="a2a6c-214">Jeśli chcesz, aby użytkownicy logowali się interaktywnie, najlepszym sposobem jest uwierzytelnianie tokenu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-214">If you want users to sign in interactively, the best way is through device token authentication.</span></span> <span data-ttu-id="a2a6c-215">Ten przebieg uwierzytelniania przekazuje użytkownikowi token do wklejenia w witrynie logowania firmy Microsoft. Następnie użytkownik może się w niej uwierzytelnić za pomocą konta usługi Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-215">This authentication flow passes the user a token to paste into a Microsoft sign-in site, where they then authenticate with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="a2a6c-216">Ta metoda uwierzytelniania obsługuje konta z włączonym uwierzytelnianiem wieloskładnikowym,w przeciwieństwie do standardowego uwierzytelniania za pomocą nazwy użytkownika/hasła.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-216">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="a2a6c-217">Aby użyć uwierzytelniania tokenu urządzenia, należy utworzyć autoryzator [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) przy użyciu funkcji [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-217">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="a2a6c-218">Wywołaj element [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) w obiekcie wynikowym, aby rozpocząć proces uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-218">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="a2a6c-219">Uwierzytelnianie przepływu urządzenia blokuje wykonywanie programu do momentu ukończenia całego przepływu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-219">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="a2a6c-220">Używanie klienta uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="a2a6c-220">Use an authentication client</span></span>

<span data-ttu-id="a2a6c-221">Jeśli potrzebujesz określonego typu uwierzytelniania i chcesz, aby program wykonał zadania związane z ładowaniem informacji o uwierzytelnianiu od użytkownika, możesz użyć dowolnego klienta zgodnego z interfejsem [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="a2a6c-221">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="a2a6c-222">Użyj typu, który zaimplementuje ten interfejs, w następujących sytuacjach:</span><span class="sxs-lookup"><span data-stu-id="a2a6c-222">Use a type that implements this interface when you:</span></span>

* <span data-ttu-id="a2a6c-223">Napisanie programu interaktywnego</span><span class="sxs-lookup"><span data-stu-id="a2a6c-223">Write an interactive program</span></span>
* <span data-ttu-id="a2a6c-224">Użycie specjalnych plików konfiguracji</span><span class="sxs-lookup"><span data-stu-id="a2a6c-224">Use specialized configuration files</span></span>
* <span data-ttu-id="a2a6c-225">Istnienie wymagania, które nie pozwala na użycie wbudowanej metody uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="a2a6c-225">Have a requirement that prevents using a built-in authentication method</span></span>

> [!WARNING]
> <span data-ttu-id="a2a6c-226">Nigdy nie umieszczaj poświadczeń platformy Azure w kodzie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-226">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="a2a6c-227">Wprowadzanie wpisów tajnych do pliku binarnego aplikacji ułatwia osobie atakującej ich wyodrębnienie, bez względu na to, czy aplikacja została uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-227">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="a2a6c-228">Powoduje to narażenie na ryzyko wszystkich zasobów platformy Azure z autoryzowanymi poświadczeniami!</span><span class="sxs-lookup"><span data-stu-id="a2a6c-228">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="a2a6c-229">W poniższej tabeli przedstawiono listę typów w zestawie SDK, które są zgodne z interfejsem `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-229">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="a2a6c-230">Typ uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="a2a6c-230">Authentication type</span></span> | <span data-ttu-id="a2a6c-231">Typ autoryzatora</span><span class="sxs-lookup"><span data-stu-id="a2a6c-231">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="a2a6c-232">Uwierzytelnianie oparte na certyfikacie</span><span class="sxs-lookup"><span data-stu-id="a2a6c-232">Certificate-based authentication</span></span> | <span data-ttu-id="a2a6c-233">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="a2a6c-233">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="a2a6c-234">Poświadczenia klienta</span><span class="sxs-lookup"><span data-stu-id="a2a6c-234">Client credentials</span></span> | <span data-ttu-id="a2a6c-235">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="a2a6c-235">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="a2a6c-236">Tożsamość usługi zarządzanej (MSI, Managed Service Identity)</span><span class="sxs-lookup"><span data-stu-id="a2a6c-236">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="a2a6c-237">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="a2a6c-237">[MSIConfig]</span></span> |
| <span data-ttu-id="a2a6c-238">Nazwa użytkownika/hasło</span><span class="sxs-lookup"><span data-stu-id="a2a6c-238">Username/password</span></span> | <span data-ttu-id="a2a6c-239">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="a2a6c-239">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="a2a6c-244">Utwórz wystawcę uwierzytelniania przy użyciu skojarzonej funkcji `New`, a następnie wywołaj instrukcję `Authorize` w obiekcie wynikowym w celu uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="a2a6c-244">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to authenticate.</span></span> <span data-ttu-id="a2a6c-245">Aby na przykład używać uwierzytelniania opartego na certyfikacie:</span><span class="sxs-lookup"><span data-stu-id="a2a6c-245">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
